# 3D Scanner Planning Document

This is a planning document/journal for the 3D scanner project.

## Getting the scanner to work

### Parts
[IMG_3144.jpeg](IMG_3144.jpeg)

### Circuit Layout
[IMG_3148.jpeg](IMG_3148.jpeg)

### Code
This code reads the raw voltage value, converts it to a distance, and sends it to serial.

_This code was generated by AI_

```cpp
void setup() {
    Serial.begin(9600);
}

float computeDistance(float voltage) {
    return pow( voltage / 15.80314 , 1.0 / -0.836479 );
}

void loop() {
    int raw = analogRead(A1);                     // 0–1023
    float voltage = raw * (5.0 / 1023.0);         // convert to volts
    float distance = computeDistance(voltage);

    Serial.println(distance, 2);                  // cm, 2 dp
    delay(100);
}
```

This is code used for validation or calibration purposes. Every time an input distance is entered the program displays that distance alongside the calculated measured distance and voltage. It reuses `computeDistance` from the above snippet.

_This code was generated by AI_

```cpp
void setup() {
    Serial.begin(9600);
    while (!Serial) {}

    // CSV header for saving to file
    Serial.println("actual_cm,raw_adc,computed_cm");

    Serial.println("Enter actual distance in cm:");
}

float computeDistance(int raw) {
    // convert ADC value (0–1023) to volts
    float voltage = raw * (5.0 / 1023.0);

    // your fitted curve
    float d = 15.80314 * pow(voltage, -0.836479);

    return d;
}

void loop() {
    static String buf = "";

    while (Serial.available() > 0) {
        char c = Serial.read();

        if (c == '\n') {
            float actual = buf.toFloat();

            // take sensor reading
            int raw = analogRead(A1);
            float measured = computeDistance(raw);

            // CSV line for logging
            Serial.print(actual, 2);
            Serial.print(",");
            Serial.print(raw);
            Serial.print(",");
            Serial.println(measured, 2);

            Serial.println("Enter next actual distance:");
            buf = "";
        }
        else if (c != '\r') {
            buf += c;
        }
    }
}
```
